# atm-java-jdbc
atm-java+jdbc

## 2017年5月25日

### atm-java-jdbc1.0
从粗糙地设计整个项目到设计表到代码实现和最后的测试，差不多花了一个半星期。前后总时长可能在20个小时上下。
因为是课堂大作业，所以使用jdbc+控制台界面是实验的要求。
作为一个妄图吃遍前后端的lowbee，怎么可以只吃荤腥，而不懂素鲜之美。
凭借着对mybatis以及hibernate等比较成熟持久化框架的浅显理解，用jdbc手扣了一个仿框架。但是写到最后，可能也只剩下一点影子能寻见了。

1.  首先把数据库相关的配置抽象成一个`DBProperties.java`，`DRIVER`、`URL`、`USER`、`PASSWORD`等参数用` public static final`来存。做到一次赋值、全局能用。
2.  entity下的值Bean和数据库的表进行映射，做到一表一Bean
3.  每张表的jdbc增删改查，封装在`jdbc`下。为了便于用sql语句动态可缺省变量增删改查的操作，用了String的拼接这种垃圾方法，将sql语句的拼接和执行分离，做到代码的重用。虽然方便但是暴露了sql注入的风险。
4.  用户的具体事务全部写在`UserService`中，一个具体功能一个方法。这部分的代码写得不是很满意，代码冗余有些多，一点都不优雅。方法的反馈用不同的code来区分。
5.  把所有的事务组合在一起，写成`domain`。里面有功能以及界面之间的跳转切换，以及对`UserService`返回的code进行对应的处理。
6.  最后整个程序在`Setup.java`留下一个进口，作为主函数。
7.  `utils.java`部分是一些通用的方法。和具体的事务没有直接的关系，起到锦上添花的效果。从用正则表达式对一部分sql注入进行过滤，到用户口令的加盐hash...具体的方法解释，可以直接看对应方法上面的javadoc

如此如此，这般这般。。。反正我开心就好。
